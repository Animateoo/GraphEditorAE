<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>GraphEditor</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div class="main-layout layout-vertical" id="mainLayout">

        <div class="primary-column" id="primaryColumn">

            <div class="mode-selector">
                <button class="mode-btn active" id="btnModeVelocity">VELOCITY</button>
                <button class="mode-btn" id="btnModeValue">VALUE</button>
            </div>

            <div class="graph-container" id="graphContainer">
                <svg id="speedGraphSVG" viewBox="0 0 300 300" preserveAspectRatio="xMidYMid meet">
                    <g id="graphGrid">
                        <path id="gridPath" class="graph-grid-line" d="" />
                    </g>

                    <line id="graphBaseLeft" class="graph-base-left" x1="0" y1="140" x2="150" y2="140" />
                    <line id="graphBaseRight" class="graph-base-right" x1="150" y1="140" x2="300" y2="140" />

                    <path id="graphFill" class="graph-fill" d="" />
                    <path id="graphCurve" class="graph-curve" d="" />

                    <line id="handleLineLeft" class="graph-handle-line" x1="0" y1="140" x2="50" y2="140" />
                    <line id="handleLineRight" class="graph-handle-line" x1="250" y1="140" x2="300" y2="140" />

                    <g id="dragGroupLeft" style="cursor: col-resize;">
                        <rect id="dragAreaLeft" x="40" y="125" width="30" height="30" fill="transparent" />
                        <circle id="handlePointLeft" class="graph-handle-point" cx="50" cy="140" r="4.5" />
                    </g>
                    <g id="dragGroupRight" style="cursor: col-resize;">
                        <rect id="dragAreaRight" x="230" y="125" width="30" height="30" fill="transparent" />
                        <circle id="handlePointRight" class="graph-handle-point" cx="250" cy="140" r="4.5" />
                    </g>
                </svg>
            </div>

            <div class="controls-section compact-mode">
                <div class="slider-row">
                    <div class="slider-wrapper">
                        <div id="outValDisplay" class="value-tooltip">50%</div>
                        <input type="range" id="sliderOut" min="0.1" max="100" value="50" step="0.1">
                    </div>
                    <div class="lock-wrapper" id="lockBtn" title="Vincular">üîì</div>
                    <div class="slider-wrapper">
                        <div id="inValDisplay" class="value-tooltip">50%</div>
                        <input type="range" id="sliderIn" min="0.1" max="100" value="50" step="0.1"
                            style="direction: rtl;">
                    </div>
                </div>

                <div class="tools-row">
                    <div class="kf-btn" data-type="linear" title="Linear"><img src="icons/linear.svg" draggable="false">
                    </div>
                    <div class="kf-btn" data-type="bezier" title="Auto Bezier"><img src="icons/bezier.svg"
                            draggable="false"></div>
                    <div class="kf-btn" data-type="hold" title="Toggle Hold"><img src="icons/hold.svg"
                            draggable="false"></div>

                    <div class="separator-vertical"></div>

                    <!-- Presets R√°pidos (iconos) -->
                    <div class="kf-btn preset-trigger" data-out="33.3" data-in="33.3" title="Easy Ease">
                        <img src="icons/easyease.svg" draggable="false">
                    </div>
                    <div class="kf-btn preset-trigger" data-out="0.1" data-in="33.3" title="Ease In">
                        <img src="icons/easein.svg" draggable="false">
                    </div>
                    <div class="kf-btn preset-trigger" data-out="33.3" data-in="0.1" title="Ease Out">
                        <img src="icons/easeout.svg" draggable="false">
                    </div>

                    <div class="separator-vertical"></div>

                    <div class="kf-btn" id="savePresetBtn" title="Guardar Preset">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#999" stroke-width="2">
                            <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
                            <polyline points="17 21 17 13 7 13 7 21"></polyline>
                            <polyline points="7 3 7 8 15 8"></polyline>
                        </svg>
                    </div>
                </div>
            </div>

            <div class="action-buttons-container">
                <button id="copyBtn" class="copy-btn" title="Copiar curva desde AE">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                        <polyline points="7 10 12 15 17 10"></polyline>
                        <line x1="12" y1="15" x2="12" y2="3"></line>
                    </svg>
                </button>
                <button id="applyBtn" class="apply-btn">APLICAR</button>
            </div>
        </div>

        <div class="resize-gutter" id="resizeGutter">
            <div class="gutter-handle"></div>
        </div>

        <div class="presets-section" id="presetsSection">
            <div class="tabs">
                <div class="tab active" id="tabPresets">PRESETS</div>
                <div class="tab" id="tabFavorites">FAVORITOS</div>
                <button id="clearAllBtn" class="clear-all-btn" title="Borrar todos los presets personalizados">üóëÔ∏è
                    LIMPIAR</button>
            </div>
            <div class="presets-scroll-container">
                <div class="presets-grid" id="presetsGrid">
                    <!-- Presets por defecto -->
                    <div class="preset-card default-preset" id="p_lin" data-out="0.1" data-in="0.1">
                        <svg class="preset-icon" viewBox="0 0 300 300" preserveAspectRatio="xMidYMid meet">
                            <path d="M50,250 L250,50" />
                        </svg>
                        <div class="preset-name">Linear</div>
                        <span class="fav-icon">‚òÖ</span>
                    </div>
                    <div class="preset-card default-preset" id="p_ee" data-out="33.3" data-in="33.3">
                        <svg class="preset-icon" viewBox="0 0 300 300" preserveAspectRatio="xMidYMid meet">
                            <path d="M40,240 C100,240 110,60 150,60 C190,60 200,240 260,240" />
                        </svg>
                        <div class="preset-name">Easy Ease</div>
                        <span class="fav-icon">‚òÖ</span>
                    </div>
                    <div class="preset-card default-preset" id="p_ei" data-out="0.1" data-in="60">
                        <svg class="preset-icon" viewBox="0 0 300 300" preserveAspectRatio="xMidYMid meet">
                            <path d="M50,250 C180,250 250,250 250,50" />
                        </svg>
                        <div class="preset-name">Ease In</div>
                        <span class="fav-icon">‚òÖ</span>
                    </div>
                    <div class="preset-card default-preset" id="p_eo" data-out="60" data-in="0.1">
                        <svg class="preset-icon" viewBox="0 0 300 300" preserveAspectRatio="xMidYMid meet">
                            <path d="M50,50 C50,250 120,250 250,250" />
                        </svg>
                        <div class="preset-name">Ease Out</div>
                        <span class="fav-icon">‚òÖ</span>
                    </div>
                    <div class="preset-card default-preset" id="p_punch" data-out="85" data-in="85">
                        <svg class="preset-icon" viewBox="0 0 300 300" preserveAspectRatio="xMidYMid meet">
                            <path d="M50,250 C80,20 220,20 250,250" />
                        </svg>
                        <div class="preset-name">Punch</div>
                        <span class="fav-icon">‚òÖ</span>
                    </div>
                    <div class="preset-card default-preset" id="p_soft" data-out="30" data-in="30">
                        <svg class="preset-icon" viewBox="0 0 300 300" preserveAspectRatio="xMidYMid meet">
                            <path d="M50,220 C100,140 200,140 250,220" />
                        </svg>
                        <div class="preset-name">Soft</div>
                        <span class="fav-icon">‚òÖ</span>
                    </div>
                    <div class="preset-card default-preset" id="p_hv" data-out="100" data-in="100">
                        <svg class="preset-icon" viewBox="0 0 300 300" preserveAspectRatio="xMidYMid meet">
                            <path d="M30,260 C60,-40 240,-40 270,260" />
                        </svg>
                        <div class="preset-name">Heavy</div>
                        <span class="fav-icon">‚òÖ</span>
                    </div>
                    <div class="preset-card default-preset" id="p_steep" data-out="95" data-in="20">
                        <svg class="preset-icon" viewBox="0 0 300 300" preserveAspectRatio="xMidYMid meet">
                            <path d="M40,240 C50,10 150,200 260,240" />
                        </svg>
                        <div class="preset-name">Steep</div>
                        <span class="fav-icon">‚òÖ</span>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <script src="CSInterface.js"></script>
    <script src="main.js"></script>
</body>

</html>